(* This crashes the gtbv2.4 DFA builder on nonterminal_lookahead
I think that any sequence of consecuative nonterminals in the grammar
can cause this.
*)

S ::= T | 'c' .

T ::= 'b' T T | S 'd' .


(
write["\n" gtb_version " processing '" gtb_main_file_name "' on " date_time "\n\n"]

this_grammar := grammar[T]
write[this_grammar]

this_nfa := nfa[this_grammar slr 1  nonterminal_lookahead_sets singleton_lookahead_sets nullable_reductions]
write[open["nfa.vcg"] this_nfa]


this_dfa := dfa[this_nfa]
write[open["dfa.vcg"] this_dfa]


(*
lr_parse[this_dfa "x z"]
*)

(*
this_derivation := tomita_1_parse[this_dfa "x"]
*)


this_derivation := tomita_1_nullable_accepts_parse[this_dfa "b c d c d"]
write[open["ssg.vcg"] this_derivation]


write["\n" CPU_time " CPU seconds elapsed\n\n"]

)