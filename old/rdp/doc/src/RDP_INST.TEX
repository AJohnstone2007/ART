\appendix
\chapter{Acquiring and installing \rdp}
\label{distribution}
\rdp\ may be fetched using anonymous ftp to {\tt
ftp.dcs.rhbnc.ac.uk}. If you are a Unix user download
\verb+pub/rdp/rdp+$x$\verb+_+$y$\verb+.tar+
or if you are an MS-DOS user download 
\verb+pub/rdp/rdp+$x$\verb+_+$y$\verb+.zip+. In each case $x$\verb+_+$y$
should be the highest number in the directory.
You can also access the \rdp\ distribution {\em via} the \rdp\ Web page
at \verb+http://www.dcs.rhbnc.ac.uk/research/languages/rdp.shmtl+.
If all else fails, try
mailing directly to \verb+A.Johnstone@rhbnc.ac.uk+ and
a tape or disk will be sent to you.

\section{Installation}
\begin{enumerate}
\item Unpack the distribution kit. You should have the
files listed in Table~\ref{files}.

\begin{table}
\footnotesize
\begin{tabular}{ll}
\verb+00readme.1_5+&An overview of \rdp\\
\verb+makefile+&Main \rdp\ makefile\\
\verb+minicalc.bnf+&\rdp\ specification for the {\tt minicalc interpreter}\\
\verb+minicond.bnf+&\rdp\ specification for the {\tt minicond interpreter}\\
\verb+miniloop.bnf+&\rdp\ specification for the {\tt miniloop compiler}\\
\verb+minitree.bnf+&\rdp\ specification for the {\tt minitree compiler}\\
\verb+mini_syn.bnf+&\rdp\ specification for the {\tt mini syntax checker}\\
\verb+ml_aux.c+&{\tt miniloop} auxiliary file\\
\verb+ml_aux.h+&{\tt miniloop} auxiliary header file\\
\verb+mt_aux.c+&{\tt minitree} auxiliary file\\
\verb+mt_aux.h+&{\tt minitree} auxiliary header file\\
\verb+mvmasm.bnf+&\rdp\ specification of the {\tt mvmasm} assembler\\
\verb+mvmsim.c+&source code for the {\tt mvmsim} simulator\\
\verb+mvm_aux.c+&auxiliary file for {\tt mvmasm}\\
\verb+mvm_aux.h+&auxiliary header file for {\tt mvmasm}\\
\verb+mvm_def.h+&op-code definitions for MVM\\
\verb+pascal.bnf+&\rdp\ specification for Pascal\\
\verb+pretty_c.bnf+&\rdp\ specification for the ANSI-C pretty printer\\
\verb+pr_c_aux.c+&auxiliary file for \verb+pretty_c+\\
\verb+pr_c_aux.h+&auxiliary header file for \verb+pretty_c+\\
\verb+rdp.bnf+&\rdp\ specification for \rdp\ itself\\
\verb+rdp.c+&\rdp\ main source file generated from \verb+rdp.bnf+\\
\verb+rdp.exe+&32-bit \rdp\ executable for Win-32 ({\tt .zip} file only)\\
\verb+rdp.h+&\rdp\ main header file generated from \verb+rdp.bnf+\\
\verb+rdp_aux.c+&\rdp\ auxiliary file\\
\verb+rdp_aux.h+&\rdp\ auxiliary header file\\
\verb+rdp_gram.c+&grammar checking routines for \rdp\\
\verb+rdp_gram.h+&grammar checking routines header for \rdp\\
\verb+rdp_prnt.c+&parser printing routines for \rdp\\
\verb+rdp_prnt.h+&parser printing routines header for \rdp\\
\verb+test.c+&ANSI-C pretty printer test source file\\
\verb+test.pas+&Pascal test source file\\
\verb+testcalc.m+&{\tt minicalc} test source file\\
\verb+testcond.m+&{\tt minicond} test source file\\
\verb+testloop.m+&{\tt miniloop} test source file\\
\verb+testtree.m+&{\tt minitree} test source file\\
\verb+rdp_doc\rdp_case.dvi+&case study \TeX\ dvi file\\
\verb+rdp_doc\rdp_case.ps+&case study Postscript source\\
\verb+rdp_doc\rdp_supp.dvi+&support manual \TeX\ dvi file\\
\verb+rdp_doc\rdp_supp.ps+&support manual Postscript source\\
\verb+rdp_doc\rdp_tut.dvi+&tutorial manual \TeX\ dvi file\\
\verb+rdp_doc\rdp_tut.ps+&tutorial manual Postscript source\\
\verb+rdp_doc\rdp_user.dvi+&user manual \TeX\ dvi file\\
\verb+rdp_doc\rdp_user.ps+&user manual Postscript source\\
\verb+rdp_supp\arg.c+&argument handling routines\\
\verb+rdp_supp\arg.h+&argument handling header\\
\verb+rdp_supp\graph.c+&graph handling routines\\
\verb+rdp_supp\graph.h+&graph handling header\\
\verb+rdp_supp\memalloc.c+&memory management routines\\
\verb+rdp_supp\memalloc.h+&memory management header\\
\verb+rdp_supp\scan.c+&scanner support routines\\
\verb+rdp_supp\scan.h+&scanner support header\\
\verb+rdp_supp\scanner.c+&the \rdp\ scanner\\
\verb+rdp_supp\set.c+&set handling routines\\
\verb+rdp_supp\set.h+&set handling header\\
\verb+rdp_supp\symbol.c+&symbol handling routines\\
\verb+rdp_supp\symbol.h+&symbol handling header\\
\verb+rdp_supp\textio.c+&text buffer handling routines\\
\verb+rdp_supp\textio.h+&text buffer handling header\\
\verb+examples\...+&examples from manuals\\
\end{tabular}
\caption{Distribution file list}
\label{files}
\end{table}

\item The makefile can be used with many different operating systems and compilers.

Edit it to make sure that it is configured for your needs by
uncommenting one of the blocks of macro definitions at the top of the
file.

\item To build everything, go to the directory containing the makefile
and type {\tt make}. The default target in the makefile builds \rdp, the
\verb+mini_syn+ syntax analyser, the {\tt minicalc} interpreter, the
{\tt minicond} interpreter, the {\tt miniloop} compiler, the {\tt
minitree} compiler an assembler called {\tt mvmasm} and its accompanying
simulator {\tt mvmsim}, a parser for the Pascal language and a pretty
printer for ANSI-C. The tools are run on various test files. None of
these should generate any errors, except for LL(1) errors caused by the
{\tt mini} and Pascal {\tt if} statements and warnings from \rdp\ about
unused \verb+comment()+ rules, which are normal. 

{\tt make} then builds \verb+rdp1+, a machine generated version of \rdp.
\verb+rdp1+ is then used to reproduce itself, creating a file called
\verb+rdp2+. The two machine generated versions are compared with each
other to make sure that the bootstrap has been successful. Finally the
machine generated versions are deleted.

\item If you type {\tt make clean} all the object files and the machine
generated \rdp\ versions will be deleted, leaving the distribution files
plus the new executables. If you type {\tt make veryclean} then the
directory is cleaned and the executables are also deleted.

\end{enumerate}
\section{Build log}

The output of a successful makefile build on MS-DOS is shown below. Note the
warning messages from \rdp\ on some commands: these are quite normal.

{\small
\begin{verbatim}
        cc -Irdp_supp\ -c rdp.c
rdp.c:
        cc -Irdp_supp\ -c rdp_aux.c
rdp_aux.c:
        cc -Irdp_supp\ -c rdp_gram.c
rdp_gram.c:
        cc -Irdp_supp\ -c rdp_prnt.c
rdp_prnt.c:
        cc -Irdp_supp\ -c rdp_supp\arg.c
rdp_supp\arg.c:
        cc -Irdp_supp\ -c rdp_supp\graph.c
rdp_supp\graph.c:
        cc -Irdp_supp\ -c rdp_supp\memalloc.c
rdp_supp\memalloc.c:
        cc -Irdp_supp\ -c rdp_supp\scan.c
rdp_supp\scan.c:
        cc -Irdp_supp\ -c rdp_supp\scanner.c
rdp_supp\scanner.c:
        cc -Irdp_supp\ -c rdp_supp\set.c
rdp_supp\set.c:
        cc -Irdp_supp\ -c rdp_supp\symbol.c
rdp_supp\symbol.c:
        cc -Irdp_supp\ -c rdp_supp\textio.c
rdp_supp\textio.c:
        cc -erdp.exe rdp.obj rdp_*.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj
        rdp -F -omini_syn mini_syn
        cc -Irdp_supp\ -c mini_syn.c
mini_syn.c:
        cc -emini_syn.exe mini_syn.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj
        mini_syn testcalc
        rdp -F -ominicalc minicalc
        cc -Irdp_supp\ -c minicalc.c
minicalc.c:
        cc -eminicalc.exe minicalc.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj 
        minicalc testcalc
a is 7
b is 14, -b is -14
7 cubed is 343
        rdp -F -ominicond minicond
******: Error - LL(1) violation - rule
 rdp_statement_2 ::= [ 'else' _and_not statement ] .
 contains null but first and follow sets both include: 'else'
******: Warning - Grammar is not LL(1) but -F set: writing files
******: 1 error and 1 warning
        cc -Irdp_supp\ -c minicond.c
minicond.c:
        cc -eminicond.exe minicond.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj 
        minicond testcond
a is 7
b is 14, -b is -14
7 cubed is 343
z equals a
z does not equal a
        rdp -F -ominiloop miniloop
******: Error - LL(1) violation - rule
 rdp_statement_2 ::= [ 'else' statement ] .
 contains null but first and follow sets both include: 'else'
******: Warning - Grammar is not LL(1) but -F set: writing files
******: 1 error and 1 warning
        cc -Irdp_supp\ -c miniloop.c
miniloop.c:
        cc -Irdp_supp\ -c ml_aux.c
ml_aux.c:
        cc -eminiloop.exe miniloop.obj ml_aux.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj 
        rdp -F -omvmasm mvmasm
        cc -Irdp_supp\ -c mvmasm.c
mvmasm.c:
        cc -Irdp_supp\ -c mvm_aux.c
mvm_aux.c:
        cc -emvmasm.exe mvmasm.obj mvm_aux.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj 
        cc -Irdp_supp\ -c mvmsim.c
mvmsim.c:
        cc -emvmsim.exe mvmsim.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj
        miniloop -otestloop.mvm testloop
        mvmasm -otestloop.sim testloop
******: Transfer address 00001000
        mvmsim testloop.sim
a is 7
b is 14, -b is -14
7 cubed is 343
z equals a
z does not equal a
a is 3
a is 2
a is 1
 -- Halted --
        rdp -F -ominitree minitree
******: Error - LL(1) violation - rule
 rdp_statement_2 ::= [ 'else' statement ] .
 contains null but first and follow sets both include: 'else'
******: Warning - Grammar is not LL(1) but -F set: writing files
******: 1 error and 1 warning
        cc -Irdp_supp\ -c minitree.c
minitree.c:
        cc -Irdp_supp\ -c mt_aux.c
mt_aux.c:
        cc -eminitree.exe minitree.obj m*_aux.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj
        minitree -otesttree.mvm testtree
        mvmasm -otesttree.sim testtree
******: Transfer address 00001000
        mvmsim testtree.sim
a is 7
b is 14, -b is -14
7 cubed is 343
z equals a
z does not equal a
a is 3
a is 2
a is 1
 -- Halted --
        rdp -opascal -F pascal
******: Error - LL(1) violation - rule
 rdp_statement_9 ::= [ 'else' statement ] .
 contains null but first and follow sets both include: 'else'
******: Warning - Grammar is not LL(1) but -F set: writing files
******: 1 error and 1 warning
        cc -Irdp_supp\ -c pascal.c
pascal.c:
        cc -epascal.exe pascal.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj
        pascal test
        rdp -opretty_c pretty_c
        cc -Irdp_supp\ -c pretty_c.c
pretty_c.c:
        cc -Irdp_supp\ -c pr_c_aux.c
pr_c_aux.c:
        cc -epretty_c.exe pretty_c.obj pr_c_aux.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj
        pretty_c test
test.c,2133,12267,5.75
        fc test.c test.bak
Comparing files test.c and test.bak
FC: no differences encountered

        del test.bak
        rdp -F -ordp1 rdp
        cc -Irdp_supp\ -c rdp1.c
rdp1.c:
        cc -erdp1.exe rdp1.obj rdp_*.obj arg.obj graph.obj memalloc.obj 
           scan.obj scanner.obj set.obj symbol.obj textio.obj
        copy rdp1.c rdp2.c
        rdp1 -F -ordp1 rdp
        fc rdp1.c rdp2.c
Comparing files rdp1.c and rdp2.c
****** rdp1.c
*
* Parser generated by RDP on Dec 20 1997 21:05:05 from rdp.bnf
*
****** rdp2.c
*
* Parser generated by RDP on Dec 20 1997 21:05:02 from rdp.bnf
*
******
\end{verbatim}
}

